<!DOCTYPE html>
<html lang="en">

<head>

    
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/2.0.1/js/dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.0/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.0/js/buttons.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.0/js/buttons.html5.min.js"></script>

    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.20/c3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>


    <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/3.0.0/css/buttons.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.20/c3.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/2.0.1/css/dataTables.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/2.0.1/css/dataTables.jqueryui.css">


    <!-- Additional styles for customization -->
    <style>
	
		/* Change color for Select2 option being highlighted (mouseover) */
.select2-results__option--highlighted[aria-selected] {
    background-color: #555 !important; /* Darker background for highlighted item */
    color: #fff !important;
}

/* Adjust select2 dropdown to fit dark theme */
.select2-container--default .select2-results>.select2-results__options {
    background-color: #333;
    color: #ddd;
}

/* Adjust the select2 search within dropdown input box to fit dark theme */
.select2-container--default .select2-search--dropdown .select2-search__field {
    background-color: #333;
    color: #ddd;
    border-color: #444;
}

/* Adjust the border and text color of the select2 box itself */
.select2-container--default .select2-selection--single {
    border-color: #444;
    color: #ddd;
}

/* Adjust the border and text color of the select2 dropdown */
.select2-dropdown {
    border-color: #444;
    color: #ddd;
}

/* Adjust the text color of the select2 results */
.select2-container--default .select2-results__option {
    color: #ddd;
}
	
		/* Your existing styles */
		body {
			background-color: #1b1e23; /* Dark background color */
			color: #ffffff; /* Light text color */
		}

		/* Adjust the background and text color of the table */
		table.dataTable {
			background-color: #000000; /* Black background color for the table */
			color: #ffffff; /* Light text color for the table */
		}

		/* Adjust the color of table headers */
		table.dataTable thead th {
			color: #ffffff; /* Light text color for table headers */
		}

		/* Adjust the color of table rows */
		table.dataTable tbody tr {
			background-color: #000000; /* Black background color for all rows */
			color: #ffffff; /* Light text color for all rows */
		}

		.custom-row-class {
			background-color: #444444 !important; /* Dark background color for highlighted rows */
		}

		table.dataTable tbody td:first-child {
			background-color: #000000; /* Black background color for the first column */
			color: #ffffff; /* Light text color for the first column */
		}

		/* Override the default DataTables stripe color */
		table.dataTable tbody tr.odd,
		table.dataTable tbody tr.odd:hover {
			background-color: #555555 !important; /* Darker background color for odd rows */
		}

		/* Adjust the color of DataTables pagination controls */
		.dataTables_paginate .paginate_button {
			color: #ffffff !important; /* Light text color for pagination controls */
		}

		.dataTables_paginate .paginate_button:hover {
			color: #ffffff !important; /* Light text color for pagination controls on hover */
		}

		/* Adjust the color of other DataTables elements */
		.dataTables_info,
		.dataTables_length label,
		.dataTables_filter label,
		.dataTables_processing,
		.dataTables_paginate,
		.dataTables_paginate span a {
			color: #ffffff !important; /* Light text color for other DataTables elements */
		}

		.dataTables_paginate span .current {
			background-color: #555555 !important; /* Darker background color for the current page number */
			color: #ffffff !important; /* Light text color for the current page number */
		}

		/* Adjust the color of DataTables length menu */
		.dataTables_length label select {
			color: #ffffff !important; /* Light text color for length menu */
			background-color: #444444 !important; /* Dark background color for length menu */
		}

		/* Adjust the color of DataTables pagination buttons */
		.dataTables_paginate .paginate_button {
			color: #ffffff !important; /* Light text color for pagination buttons */
		}

		.dataTables_paginate .paginate_button:hover {
			color: #ffffff !important; /* Light text color for pagination buttons on hover */
		}

		/* Adjust the color of DataTables pagination controls at the bottom right */
		.dataTables_wrapper .dataTables_paginate .paginate_button {
			color: #ffffff !important; /* Light text color for pagination controls */
		}

		.dataTables_wrapper .dataTables_paginate .paginate_button:hover {
			color: #ffffff !important; /* Light text color for pagination controls on hover */
		}

		/* Adjust the color of DataTables previous button */
		.dataTables_wrapper .dataTables_paginate .previous {
			color: #ffffff !important; /* Light text color for the Previous button */
		}

		.dataTables_wrapper .dataTables_paginate .previous:hover {
			color: #ffffff !important; /* Light text color for the Previous button on hover */
		}

		/* Adjust the color of DataTables search input */
		.dataTables_wrapper .dataTables_filter input {
			color: #ffffff !important; /* Light text color for the search input */
			background-color: #444444 !important; /* Dark background color for the search input */
		}

		/* Adjust the color of DataTables search input on focus */
		.dataTables_wrapper .dataTables_filter input:focus {
			color: #ffffff !important; /* Light text color for the search input on focus */
			background-color: #555555 !important; /* Darker background color for the search input on focus */
		}

		#balanceTable {
			margin: 20px auto;
		}

		table.dataTable thead th.sorting,
		table.dataTable thead th.sorting_asc,
		table.dataTable thead th.sorting_desc,
		table.dataTable thead th.sorting_asc_disabled,
		table.dataTable thead th.sorting_desc_disabled {
			background-color: #000000 !important; /* Darker background color for the filtered column header */
			color: #ffffff !important; /* Light text color for the filtered column header */
		}
		table.dataTable tbody tr.even,
		table.dataTable tbody tr.even:hover,
		table.dataTable tbody tr.odd,
		table.dataTable tbody tr.odd:hover {
			background-color: #000000 !important; /* Set the background color as needed */
		}

		#balanceTable_wrapper {
			margin: 20px auto;
			width: 80%; /* Adjust the width as needed */
		}
		table.dataTable tbody tr {
			background-color: #000000 !important; /* Set the background color as needed */
		}
		

		/* Adjust the color of table rows during hover */
		table.dataTable tbody tr:hover {
			background-color: #333333 !important; /* Set the hover background color as needed */
		}
		/* Add these styles to customize the Date Range Filter */
		.daterangepicker {
			background-color: #000000 !important; /* Black background color */
			color: #ffffff !important; /* White text color */
		}

		.daterangepicker .calendar-time {
			background-color: #000000 !important; /* Black background color for time selection */
		}

		.daterangepicker .daterangepicker_input {
			background-color: #000000 !important; /* Black background color for input */
			color: #ffffff !important; /* White text color for input */
		}

		.daterangepicker .daterangepicker_input input {
			border-color: #555555 !important; /* Border color for input */
		}

		.daterangepicker .ranges li.active {
			background-color: #555555 !important; /* Darker background color for active range */
		}

		.daterangepicker .ranges li:hover {
			background-color: #444444 !important; /* Dark background color for hover effect */
		}

		.daterangepicker .ranges li.active::before {
			border-bottom-color: #555555 !important; /* Border color for active range indicator */
		}

		.daterangepicker .applyBtn, .daterangepicker .cancelBtn {
			background-color: #555555 !important; /* Dark background color for buttons */
			color: #ffffff !important; /* White text color for buttons */
		}

		.daterangepicker .applyBtn:hover, .daterangepicker .cancelBtn:hover {
			background-color: #444444 !important; /* Darker background color for button hover effect */
		}
		table.dataTable tbody tr.filter-row td {
			background-color: #000000 !important; /* Black background color for the filtered column */
			color: #ffffff !important; /* Light text color for the filtered column */
		}
		
	.subcategory-select {
			background-color: black;
			color: white; /* Set the text color to white for better visibility */
		}
		
		#bar_chart .c3-axis-x-label,
		#bar_chart .c3-axis-y-label,
		#bar_chart .c3-axis-x .tick text,
		#bar_chart .c3-axis-y .tick text {
			fill: white !important;
		}
		#bar_chart .c3-tooltip {
    background-color: darkgray;
}

#bar_chart .c3-tooltip tr {
    color: white; /* Set the text color for better visibility on dark background */
}.c3-tooltip-container {
    background-color: darkgray !important;
    color: white !important;
}
	
 .transaction_edit_filter {
            display: flex;
            align-items: center;
        }
.spacer-label {
            padding: 0 10px; /* Adjust the padding as needed */
        }
#transactionTable_wrapper {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
}
	</style>

</head>

<body>

<a href="/" title="Go to Home">
        <i class="fas fa-home" style="color: #61DAFB; font-size: 24px;"></i>
    </a>
<!-- Add this to your transaction_edit.html file -->
<div style="width: 80%; height: 50%;">
    <canvas id="lineChartCanvas" style="width: 100%; height: 100%;"></canvas>
</div>




<div class="transaction_edit_filter">



<form method="GET" action="/analyze_transaction">
  <label for="date_range">Date Range:</label>
  <input type="text" id="date_range" name="date_range"  />
  
  <!-- Add hidden input fields for start_date and end_date -->
  <input type="hidden" id="start_date" name="start_date" />
  <input type="hidden" id="end_date" name="end_date" />

 
</form>
    <label class="spacer-label" for="dropdown_select"> </label>

<label for="dropdown_select"></label>
<select id="dropdown_select">
	<option value="Subcategory">Subcategory</option>
    <option value="Year">Year</option>
    <option value="Month">Month</option>
    <option value="FormattedMonth">Formatted Month</option>
    <option value="Payee">Payee</option>    
</select>
</div>
<div id="bar_chart_container">
    <div id="bar_chart"></div>
</div>
<div class="dt-buttons"> </div>
    <!-- DataTable for displaying transaction details -->
    <table id="transactionTable" class="display" style="width: 100%">
        <thead>
            <tr>
                <th>Year</th>
                <th>Month</th>
                <th>Formatted Month</th>
                <th>Transaction Date</th>
                <th>Description</th>
                <th>Payee</th>
                <th>Subcategory</th> <!-- New column for dropdown -->
                <th>Transaction Key</th>
                <th>Transaction Amount</th>
				<th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in transaction_data %}
            <tr>
                <td>{{ transaction[0] }}</td>
                <td>{{ transaction[1] }}</td>
                <td>{{ transaction[2] }}</td>
                <td>{{ transaction[3] }}</td>
                <td>{{ transaction[4] }}</td>
                <td>{{ transaction[5] }}</td>
				<td>{{ transaction[6] }}</td>                
                <td>{{ transaction[7] }}</td>
                <td>{{ transaction[8] }}</td>
				<td>
					<div class="subcategory-cell">
						<button class="re-categorize-button">Re-categorize</button>
						<div class="subcategory-dropdown" style="display: none;"></div>
					</div>
				</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Include DataTables initialization script with export options and date range filter -->
    <script>
        var transaction_data = {{ transaction_data | tojson | safe }};
    </script>
    <script src="{{ url_for('static', filename='transaction-edit.js') }}"></script>



</body>

</html>
